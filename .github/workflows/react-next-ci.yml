name: Test react@next integration
# This workflow is triggered on pushes to the repository.
on: [push, repository_dispatch]

jobs:
  test:
    name: Test
    # This job runs on Linux
    runs-on: ubuntu-latest
    steps:
      - name: Setup Material-UI repository
        run: |
          git clone https://github.com/mui-org/material-ui.git
      - name: Apply Version
        run: |
          version=$(npm dist-tag ls react | grep -oP 'next: \K(.*)')
          node apply-version $version
          cd material-ui
          yarn
      - name: JSDOM tests
        run: |
          cd material-ui
          yarn test:unit
      - name: browser tests
        run: |
          cd material-ui
          yarn test:karma